<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    {# --- Metadata --- #}
    {# Use 'title' from front matter, append site name if it exists, or use default #}
    {% set pageTitle = title or "Untitled" %}
    {% set siteName = "CLAN.com Blog" %} {# Define site name here or in _data #}
    <title>{{ pageTitle }}{% if pageTitle != siteName %} | {{ siteName }}{% endif %}</title>

    {# Description: Use 'description' from front matter, fallback to 'summary', else default #}
    {# Note: Stripping HTML tags from summary for meta description #}
    {% set metaDescription = description or (summary | striptags | truncate(155, true, "...") if summary) or "The official blog of CLAN.com" %}
    <meta name="description" content="{{ metaDescription }}">

    {# Add Open Graph / Twitter Card meta tags later for social sharing #}
    {# <meta property="og:title" content="{{ pageTitle }}"> #}
    {# <meta property="og:description" content="{{ metaDescription }}"> #}
    {# <meta property="og:image" content="{{ featuredImage | url or '/images/site/default-social.jpg' | url }}"> #}
    {# <meta name="twitter:card" content="summary_large_image"> #}
    {# --- End Metadata --- #}

    {# Link to CSS files #}
    <link rel="stylesheet" href="{{ '/css/blog.css' | url }}">
    {% if isAdmin %}
    <link rel="stylesheet" href="{{ '/css/admin.css' | url }}">
    {% endif %}
</head>
<body class="light-theme">
    <header class="site-header">
        <div class="header-wrapper">
            <div class="header-controls">
                <button id="themeToggle" class="control-button theme-toggle" aria-label="Toggle dark theme">
                    <span class="icon">üåì</span>
                    <span class="label">Theme</span>
                </button>
                
                {% if isAdmin %}
                <button id="deletedToggle" class="control-button deleted-toggle" aria-label="Toggle deleted posts">
                    <span class="icon">üóëÔ∏è</span>
                    <span class="label">Deleted</span>
                </button>
                <button id="draftToggle" class="control-button draft-toggle" aria-label="Toggle draft posts">
                    <span class="icon">üìù</span>
                    <span class="label">Drafts</span>
                </button>
                <button id="helpToggle" class="control-button help-toggle" aria-label="Toggle help">
                    <span class="icon">‚ùì</span>
                    <span class="label">Help</span>
                </button>
                {% endif %}
            </div>

            <a href="{{ '/' | url }}" class="header-logo" aria-label="CLAN.com Blog Home">
                <img src="{{ '/images/site/header.jpg' | url }}" alt="CLAN.com Blog Header" class="site-header-image">
            </a>
        </div>
    </header>

    <main>
        {# Use Nunjucks block for content injection #}
        {% block content %}
        {# Default content can go here if needed, but often left empty #}
        {% endblock %}
    </main>

    <footer class="site-footer">
        <a href="{{ '/' | url }}" aria-label="CLAN.com Blog Home">
            <img src="{{ '/images/site/footer.jpg' | url }}" alt="CLAN.com Blog Footer" class="site-footer-image">
        </a>
        <div class="footer-content">
            <p>&copy; {{ page.date.getFullYear() }} CLAN.com. All rights reserved.</p>
        </div>
    </footer>

    {# Core Scripts #}
    <script src="{{ '/js/theme.js' | url }}"></script>
    
    {# Admin Scripts #}
    {% if isAdmin %}
    <script src="{{ '/js/admin.js' | url }}"></script>
    <script src="{{ '/js/admin-controls.js' | url }}"></script>
    {% endif %}
</body>
</html>